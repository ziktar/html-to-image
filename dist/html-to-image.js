!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).htmlToImage={})}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{a(r.next(e))}catch(e){o(e)}}function u(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}a((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,r=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(i=c.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){c.label=u[1];break}if(6===u[0]&&c.label<i[1]){c.label=i[1],i=u;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(u);break}i[2]&&c.ops.pop(),c.trys.pop();continue}u=t.call(e,c)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}var r,i=(r=0,function(){return r+=1,"u".concat("0000".concat((Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)).concat(r)});function o(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t}var c=null;function u(e,t){var n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function a(e,t){void 0===t&&(t={});var n,r,i,o=t.width||(r=u(n=e,"border-left-width"),i=u(n,"border-right-width"),n.clientWidth+r+i),c=t.height||function(e){var t=u(e,"border-top-width"),n=u(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:o,height:c}}var s=16384;function l(e,t){return void 0===t&&(t={}),e.toBlob?new Promise((function(n){e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)})):new Promise((function(n){for(var r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),i=r.length,o=new Uint8Array(i),c=0;c<i;c+=1)o[c]=r.charCodeAt(c);n(new Blob([o],{type:t.type?t.type:"image/png"}))}))}function f(e){return new Promise((function(t,n){var r=new Image;r.decode=function(){return t(r)},r.onload=function(){return e.startsWith("blob")&&URL.revokeObjectURL(e),t(r)},r.onerror=function(t){e.startsWith("blob")&&URL.revokeObjectURL(e),n(t)},r.crossOrigin="anonymous",r.decoding="async",r.src=e}))}function h(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return navigator.userAgent.match(/Firefox\/(\d+)\./)||navigator.userAgent.match(/Safari\/(\d+)\./)&&!navigator.userAgent.match(/Chrome\/(\d+)\./)?[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then((function(e){return new Blob([e],{type:"image/svg+xml"})})).then((function(e){return URL.createObjectURL(e)}))]:[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,".concat(e)}))]}))}))}function d(e,r,i){return t(this,void 0,void 0,(function(){var t,o,c;return n(this,(function(n){return t="http://www.w3.org/2000/svg",o=document.createElementNS(t,"svg"),c=document.createElementNS(t,"foreignObject"),o.setAttribute("crossOrigin","anonymous"),o.setAttribute("width","".concat(r)),o.setAttribute("height","".concat(i)),o.setAttribute("viewBox","0 0 ".concat(r," ").concat(i)),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),[2,h(o)]}))}))}var v=function(e,t){if(e instanceof t)return!0;var n="nodeName";if(t===HTMLCanvasElement)return"CANVAS"===e[n];if(t===HTMLIFrameElement)return"IFRAME"===e[n];if(t===HTMLVideoElement)return"VIDEO"===e[n];if(t===HTMLTextAreaElement)return"TEXTAREA"===e[n];if(t===HTMLInputElement)return"INPUT"===e[n];if(t===HTMLSelectElement)return"INPUT"===e[n];var r=Object.getPrototypeOf(e);return null!==r&&(r.constructor.name===t.name||v(r,t))};function g(e,t,n){var r=".".concat(e,":").concat(t),i=n.cssText?function(e){var t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e){return o(e).map((function(t){var n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(r?" !important":"",";")})).join(" ")}(n);return document.createTextNode("".concat(r,"{").concat(i,"}"))}function m(e,t,n){var r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(""!==o&&"none"!==o){var c=i();try{t.className="".concat(t.className," ").concat(c)}catch(e){return}var u=document.createElement("style");u.appendChild(g(c,n,r)),t.appendChild(u)}}var p="application/font-woff",w="image/jpeg",b={woff:p,woff2:p,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:w,jpeg:w,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function y(e){var t=function(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return b[t]||""}function S(e){return-1!==e.search(/^(data:)/)}function E(e,t){return"data:".concat(t,";base64,").concat(e)}function x(e,r,i){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:return[4,fetch(e,r)];case 1:if(404===(t=n.sent()).status)throw new Error('Resource "'.concat(t.url,'" not found'));return[4,t.blob()];case 2:return o=n.sent(),[2,new Promise((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(){try{e(i({res:t,result:r.result}))}catch(e){n(e)}},r.readAsDataURL(o)}))]}}))}))}var T={};function C(e,r,i){return t(this,void 0,void 0,(function(){var t,o,c,u,a;return n(this,(function(n){switch(n.label){case 0:if(t=function(e,t,n){var r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?"[".concat(t,"]").concat(r):r}(e,r,i.includeQueryParams),null!=T[t])return[2,T[t]];i.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,x(e,i.fetchRequestInit,(function(e){var t=e.res,n=e.result;return r||(r=t.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n)}))];case 2:return c=n.sent(),o=E(c,r),[3,4];case 3:return u=n.sent(),o=i.imagePlaceholder||"",a="Failed to fetch resource: ".concat(e),u&&(a="string"==typeof u?u:u.message),a&&console.warn(a),[3,4];case 4:return T[t]=o,[2,o]}}))}))}function P(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){return"data:,"===(t=e.toDataURL())?[2,e.cloneNode(!1)]:[2,f(t)]}))}))}function R(e,r){return t(this,void 0,void 0,(function(){var t,i,o,c;return n(this,(function(n){switch(n.label){case 0:return e.currentSrc?(t=document.createElement("canvas"),i=t.getContext("2d"),t.width=e.clientWidth,t.height=e.clientHeight,null==i||i.drawImage(e,0,0,t.width,t.height),[2,f(t.toDataURL())]):(o=e.poster,c=y(o),[4,C(o,c,r)]);case 1:return[2,f(n.sent())]}}))}))}function L(e){var r;return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),(null===(r=null==e?void 0:e.contentDocument)||void 0===r?void 0:r.body)?[4,M(e.contentDocument.body,{stripStaticAndFixed:!0},!0)]:[3,2];case 1:return(t=n.sent()).style.setProperty("position","relative"),[2,t];case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return[2,e.cloneNode(!1)]}}))}))}function A(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){return v(e,HTMLCanvasElement)?[2,P(e)]:v(e,HTMLVideoElement)?[2,R(e,r)]:v(e,HTMLIFrameElement)?[2,L(e)]:[2,e.cloneNode(!1)]}))}))}var k=function(e){return null!=e.tagName&&"SLOT"===e.tagName.toUpperCase()};function I(e,t,n){var r=t.style;if(r){var i=window.getComputedStyle(e);if(i.cssText)r.cssText=i.cssText,r.transformOrigin=i.transformOrigin;else{var u=v(e,HTMLIFrameElement);(c||(c=o(window.getComputedStyle(document.documentElement)).filter((function(e){var t=String(e);if(t.startsWith("animation")||t.startsWith("scroll")||t.startsWith("transition")||t.startsWith("view-timeline"))return!1;switch(t){case"buffered-rendering":case"cursor":case"user-select":case"overscroll-behavior-block":case"overscroll-behavior-inline":case"pointer-events":case"ruby-position":case"speak":case"timeline-scope":case"touch-action":case"will-change":case"-webkit-tap-highlight-color":case"-webkit-user-drag":case"-webkit-user-modify":return!1}return!0})))).forEach((function(o){var c=i.getPropertyValue(o);if(c){if("font-size"===o&&c.endsWith("px")){var a=Math.floor(parseFloat(c.substring(0,c.length-2)))-.1;c="".concat(a,"px")}if(u&&"display"===o&&"inline"===c&&(c="block"),n&&"position"===o&&("static"===c||"fixed"===c)){if(!e.style.position)return;c="absolute"}"d"===o&&t.getAttribute("d")&&(c="path(".concat(t.getAttribute("d"),")")),r.setProperty(o,c,i.getPropertyPriority(o))}}))}}}function N(e,t,n){return v(t,Element)&&(I(e,t,n),function(e,t){m(e,t,":before"),m(e,t,":after")}(e,t),function(e,t){v(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),v(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(v(e,HTMLSelectElement)){var n=t,r=Array.from(n.children).find((function(t){return e.value===t.getAttribute("value")}));r&&r.setAttribute("selected","")}}(e,t)),t}function M(e,r,i){return t(this,void 0,void 0,(function(){return n(this,(function(c){return i||!r.filter||r.filter(e)?"SCRIPT"===e.tagName?[2,null]:v(e,HTMLIFrameElement)?[2,Promise.resolve(e).then((function(e){return A(e,r)}))]:[2,Promise.resolve(e).then((function(e){return A(e,r)})).then((function(i){return function(e,r,i){var c,u;return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return t=[],0===(t=k(e)&&e.assignedNodes?o(e.assignedNodes()):v(e,HTMLIFrameElement)&&(null===(c=e.contentDocument)||void 0===c?void 0:c.body)?o(e.contentDocument.body.childNodes):o((null!==(u=e.shadowRoot)&&void 0!==u?u:e).childNodes)).length||v(e,HTMLVideoElement)?[2,r]:[4,t.reduce((function(e,t){return e.then((function(){return M(t,i)})).then((function(e){e&&r.appendChild(e)}))}),Promise.resolve())];case 1:return n.sent(),[2,r]}}))}))}(e,i,r)})).then((function(t){return N(e,t,r.stripStaticAndFixed)})).then((function(e){return function(e,r){return t(this,void 0,void 0,(function(){var t,i,o,c,u,a,s,l,f,h,d,v,g;return n(this,(function(n){switch(n.label){case 0:if(0===(t=e.querySelectorAll?e.querySelectorAll("use"):[]).length)return[2,e];i={},g=0,n.label=1;case 1:return g<t.length?(o=t[g],(c=o.getAttribute("xlink:href"))?(u=e.querySelector(c),a=document.querySelector(c),u||!a||i[c]?[3,3]:(s=i,l=c,[4,M(a,r,!0)])):[3,3]):[3,4];case 2:s[l]=n.sent(),n.label=3;case 3:return g++,[3,1];case 4:if((f=Object.values(i)).length){for(h="http://www.w3.org/1999/xhtml",(d=document.createElementNS(h,"svg")).setAttribute("xmlns",h),d.style.position="absolute",d.style.width="0",d.style.height="0",d.style.overflow="hidden",d.style.display="none",v=document.createElementNS(h,"defs"),d.appendChild(v),g=0;g<f.length;g++)v.appendChild(f[g]);e.appendChild(d)}return[2,e]}}))}))}(e,r)}))]:[2,null]}))}))}var H=/url\((['"]?)([^'"]+?)\1\)/g,U=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,D=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function F(e,r,i,o,c){return t(this,void 0,void 0,(function(){var t,u,a,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),t=i?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}(r,i):r,u=y(r),a=void 0,c?[4,c(t)]:[3,2];case 1:return s=n.sent(),a=E(s,u),[3,4];case 2:return[4,C(t,u,o)];case 3:a=n.sent(),n.label=4;case 4:return[2,e.replace((l=r,f=l.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),new RegExp("(url\\(['\"]?)(".concat(f,")(['\"]?\\))"),"g")),"$1".concat(a,"$3"))];case 5:return n.sent(),[3,6];case 6:return[2,e]}var l,f}))}))}function V(e){return-1!==e.search(H)}function O(e,r,i){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){return V(e)?(t=function(e,t){var n=t.preferredFontFormat;return n?e.replace(D,(function(e){for(;;){var t=U.exec(e)||[],r=t[0],i=t[2];if(!i)return"";if(i===n)return"src: ".concat(r,";")}})):e}(e,i),o=function(e){var t=[];return e.replace(H,(function(e,n,r){return t.push(r),e})),t.filter((function(e){return!S(e)}))}(t),[2,o.reduce((function(e,t){return e.then((function(e){return F(e,t,r,i)}))}),Promise.resolve(t))]):[2,e]}))}))}function j(e,r,i){var o;return t(this,void 0,void 0,(function(){var t,c;return n(this,(function(n){switch(n.label){case 0:return(t=null===(o=r.style)||void 0===o?void 0:o.getPropertyValue(e))?[4,O(t,null,i)]:[3,2];case 1:return c=n.sent(),r.style.setProperty(e,c,r.style.getPropertyPriority(e)),[2,!0];case 2:return[2,!1]}}))}))}function q(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,j("background",e,r)];case 1:return t.sent()?[3,3]:[4,j("background-image",e,r)];case 2:t.sent(),t.label=3;case 3:return[4,j("mask",e,r)];case 4:return t.sent()?[3,6]:[4,j("mask-image",e,r)];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}function W(e,r){return t(this,void 0,void 0,(function(){var t,i,o;return n(this,(function(n){switch(n.label){case 0:return(t=v(e,HTMLImageElement))&&!S(e.src)||v(e,SVGImageElement)&&!S(e.href.baseVal)?[4,C(i=t?e.src:e.href.baseVal,y(i),r)]:[2];case 1:return o=n.sent(),[4,new Promise((function(n,r){e.onload=n,e.onerror=r;var i=e;i.decode&&(i.decode=n),"lazy"===i.loading&&(i.loading="eager"),t?(e.srcset="",e.src=o):e.href.baseVal=o}))];case 2:return n.sent(),[2]}}))}))}function B(e,r){return t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:return t=o(e.childNodes),i=t.map((function(e){return z(e,r)})),[4,Promise.all(i).then((function(){return e}))];case 1:return n.sent(),[2]}}))}))}function z(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return v(e,Element)?[4,q(e,r)]:[3,4];case 1:return t.sent(),[4,W(e,r)];case 2:return t.sent(),[4,B(e,r)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}var $={};function X(e){return t(this,void 0,void 0,(function(){var t,r;return n(this,(function(n){switch(n.label){case 0:return null!=(t=$[e])?[2,t]:[4,fetch(e)];case 1:return[4,n.sent().text()];case 2:return r=n.sent(),t={url:e,cssText:r},$[e]=t,[2,t]}}))}))}function _(e,r){return t(this,void 0,void 0,(function(){var i,o,c,u,a=this;return n(this,(function(s){return i=e.cssText,o=/url\(["']?([^"')]+)["']?\)/g,c=i.match(/url\([^)]+\)/g)||[],u=c.map((function(c){return t(a,void 0,void 0,(function(){var t;return n(this,(function(n){return(t=c.replace(o,"$1")).startsWith("https://")||(t=new URL(t,e.url).href),[2,x(t,r.fetchRequestInit,(function(e){var t=e.result;return i=i.replace(c,"url(".concat(t,")")),[c,t]}))]}))}))})),[2,Promise.all(u).then((function(){return i}))]}))}))}function G(e){if(null==e)return[];for(var t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){if(null===(c=r.exec(n)))break;t.push(c[0])}n=n.replace(r,"");for(var i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){var c;if(null===(c=i.exec(n))){if(null===(c=o.exec(n)))break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;t.push(c[0])}return t}function J(e,r){return t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){return t=[],i=[],e.forEach((function(t){if("cssRules"in t)try{o(t.cssRules||[]).forEach((function(e,n){if(e.type===CSSRule.IMPORT_RULE){var o=n+1,c=X(e.href).then((function(e){return _(e,r)})).then((function(e){return G(e).forEach((function(e){try{t.insertRule(e,e.startsWith("@import")?o+=1:t.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}}))})).catch((function(e){console.error("Error loading remote css",e.toString())}));i.push(c)}}))}catch(o){var n=e.find((function(e){return null==e.href}))||document.styleSheets[0];null!=t.href&&i.push(X(t.href).then((function(e){return _(e,r)})).then((function(e){return G(e).forEach((function(e){n.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",o)}})),[2,Promise.all(i).then((function(){return e.forEach((function(e){if("cssRules"in e)try{o(e.cssRules||[]).forEach((function(e){t.push(e)}))}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t)}})),t}))]}))}))}function Q(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return V(e.style.getPropertyValue("src"))}))}function K(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");return[4,J(o(e.ownerDocument.styleSheets),r)];case 1:return[2,Q(t.sent())]}}))}))}function Y(e,r){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return[4,K(e,r)];case 1:return t=n.sent(),[4,Promise.all(t.map((function(e){var t=e.parentStyleSheet?e.parentStyleSheet.href:null;return O(e.cssText,t,r)})))];case 2:return[2,n.sent().join("\n")]}}))}))}function Z(e,r){return t(this,void 0,void 0,(function(){var t,i,o,c,u;return n(this,(function(n){switch(n.label){case 0:return null==r.fontEmbedCSS?[3,1]:(i=r.fontEmbedCSS,[3,5]);case 1:return r.skipFonts?(o=null,[3,4]):[3,2];case 2:return[4,Y(e,r)];case 3:o=n.sent(),n.label=4;case 4:i=o,n.label=5;case 5:return(t=i)&&(c=document.createElement("style"),u=document.createTextNode(t),c.appendChild(u),e.firstChild?e.insertBefore(c,e.firstChild):e.appendChild(c)),[2]}}))}))}function ee(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){var t,i,o,c,u,s;return n(this,(function(n){switch(n.label){case 0:return t=a(e,r),i=t.width,o=t.height,[4,M(e,r,!0)];case 1:return c=n.sent(),r.embedStyle&&(u=document.createElement("style"),s=document.createTextNode(r.embedStyle),u.appendChild(s),c.appendChild(u)),[4,Z(c,r)];case 2:return n.sent(),[4,z(c,r)];case 3:return n.sent(),function(e,t){var n=e.style;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));var r=t.style;null!=r&&Object.keys(r).forEach((function(e){n[e]=r[e]}))}(c,r),[4,d(c,i,o)];case 4:return[2,n.sent()]}}))}))}function te(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){var t,i,o,c,u,l,h,d,v,g,m;return n(this,(function(n){switch(n.label){case 0:return t=a(e,r),i=t.width,o=t.height,[4,ee(e,r)];case 1:return[4,f(n.sent())];case 2:return c=n.sent(),u=document.createElement("canvas"),l=u.getContext("2d"),h=r.pixelRatio||function(){var e,t;try{t=process}catch(e){}var n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),d=r.canvasWidth||i,v=r.canvasHeight||o,g=r.margin||0,m=r.marginBackgroundColor||r.backgroundColor,u.width=d*h+2*g,u.height=v*h+2*g,r.skipAutoScale||function(e){(e.width>s||e.height>s)&&(e.width>s&&e.height>s?e.width>e.height?(e.height*=s/e.width,e.width=s):(e.width*=s/e.height,e.height=s):e.width>s?(e.height*=s/e.width,e.width=s):(e.width*=s/e.height,e.height=s))}(u),u.style.width="".concat(d),u.style.height="".concat(v),m&&(l.fillStyle=m,l.fillRect(0,0,u.width,u.height)),l.drawImage(c,g,g,u.width-2*g,u.height-2*g),[2,u]}}))}))}e.getFontEmbedCSS=function(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){return n(this,(function(t){return[2,Y(e,r)]}))}))},e.toBlob=function(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,te(e,r)];case 1:return[4,l(t.sent())];case 2:return[2,t.sent()]}}))}))},e.toCanvas=te,e.toJpeg=function(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,te(e,r)];case 1:return[2,t.sent().toDataURL("image/jpeg",r.quality||1)]}}))}))},e.toPixelData=function(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){var t,i,o,c;return n(this,(function(n){switch(n.label){case 0:return t=a(e,r),i=t.width,o=t.height,[4,te(e,r)];case 1:return c=n.sent(),[2,c.getContext("2d").getImageData(0,0,i,o).data]}}))}))},e.toPng=function(e,r){return void 0===r&&(r={}),t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,te(e,r)];case 1:return[2,t.sent().toDataURL()]}}))}))},e.toSvg=ee}));
//# sourceMappingURL=html-to-image.js.map
